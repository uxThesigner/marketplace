<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#ffffff">
    
    <title>Métricas | Koda White-Label</title>
    
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        /* Card de Saldo Principal */
        .balance-card {
            background: var(--surface-color); padding: 24px;
            border-radius: var(--radius-lg); text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03); border: 1px solid var(--border-color);
            margin-bottom: 20px;
        }
        .balance-label { font-size: 14px; color: var(--text-secondary); margin-bottom: 8px; font-weight: 500; }
        .balance-value { font-size: 32px; font-weight: 700; color: var(--text-primary); letter-spacing: -0.5px; }
        .balance-growth {
            display: inline-flex; align-items: center; gap: 4px;
            font-size: 13px; font-weight: 600; color: #166534; background: #dcfce7;
            padding: 4px 10px; border-radius: 20px; margin-top: 10px;
        }
        body.dark-mode .balance-growth { background: rgba(22, 101, 52, 0.3); color: #86efac; }

        /* Seletor de Período */
        .period-selector {
            display: flex; background: var(--surface-color);
            padding: 4px; border-radius: 12px;
            margin-bottom: 25px; border: 1px solid var(--border-color);
        }
        .period-btn {
            flex: 1; padding: 8px; text-align: center;
            font-size: 13px; font-weight: 600; color: var(--text-secondary);
            border-radius: 8px; transition: 0.3s;
        }
        .period-btn.active {
            background: var(--bg-color); color: var(--text-primary);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        /* Progresso das Plataformas */
        .platform-stats {
            background: var(--surface-color); padding: 20px; border-radius: var(--radius-md);
            margin-bottom: 25px; border: 1px solid var(--border-color);
        }
        .stat-row { margin-bottom: 15px; }
        .stat-row:last-child { margin-bottom: 0; }
        .stat-header { display: flex; justify-content: space-between; font-size: 13px; margin-bottom: 6px; }
        .stat-name { font-weight: 600; display: flex; align-items: center; gap: 6px; }
        .stat-val { color: var(--text-secondary); }
        .progress-track { width: 100%; height: 6px; background: var(--bg-color); border-radius: 4px; overflow: hidden; }
        .progress-fill { height: 100%; border-radius: 4px; }

        /* Extrato */
        .transaction-list { display: flex; flex-direction: column; }
        .trans-item {
            display: flex; align-items: center; justify-content: space-between;
            padding: 16px 0; border-bottom: 1px solid var(--border-color);
        }
        .trans-item:last-child { border-bottom: none; }
        .trans-icon {
            width: 42px; height: 42px; border-radius: 10px;
            background: var(--bg-color); color: var(--text-secondary);
            display: flex; align-items: center; justify-content: center;
            font-size: 20px; margin-right: 15px;
        }
        .trans-details { flex: 1; }
        .trans-title { font-size: 14px; font-weight: 600; color: var(--text-primary); margin-bottom: 2px; }
        .trans-date { font-size: 12px; color: var(--text-secondary); }
        .trans-amount { text-align: right; }
        .amount-val { font-size: 14px; font-weight: 700; color: #166534; display: block; }
        .platform-badge-mini { font-size: 10px; font-weight: 600; color: var(--text-secondary); text-transform: uppercase; }
        body.dark-mode .amount-val { color: #4ade80; }
    </style>
</head>
<body>

    <script>
        (function() {
            const savedMode = localStorage.getItem('koda_theme_mode');
            if (savedMode === 'dark') document.body.classList.add('dark-mode');
            const savedColor = localStorage.getItem('koda_theme_color');
            if (savedColor) {
                document.documentElement.style.setProperty('--primary-color', savedColor);
                document.documentElement.style.setProperty('--primary-dark', savedColor);
            }
        })();
    </script>

    <header class="app-header">
        <div class="header-left">
            <a href="dashboard.html">
                <i class="ph ph-arrow-left" style="font-size: 24px; color: var(--text-primary);"></i>
            </a>
            <span style="margin-left: 10px; font-weight: 700; font-size: 18px;">Relatórios</span>
        </div>
        <div class="header-right">
            <button onclick="alert('Exportar PDF')">
                <i class="ph ph-export" style="font-size: 24px; color: var(--text-secondary);"></i>
            </button>
        </div>
    </header>

    <main class="app-content">

        <div class="period-selector">
            <div class="period-btn" onclick="filterPeriod(this, '7d')">7 Dias</div>
            <div class="period-btn" onclick="filterPeriod(this, '15d')">15 Dias</div>
            <div class="period-btn active" onclick="filterPeriod(this, '30d')">Mês</div>
            <div class="period-btn" onclick="filterPeriod(this, 'total')">Total</div>
        </div>

        <div class="balance-card">
            <div class="balance-label">Vendas no Período</div>
            <div class="balance-value">R$ 148.500,00</div>
            <div class="balance-growth">
                <i class="ph ph-trend-up"></i> +12.5% vs mês anterior
            </div>
        </div>

        <div class="section-header" style="margin-top: 10px;">
            <h3>Origem das Vendas</h3>
        </div>
        <div class="platform-stats">
            <div class="stat-row">
                <div class="stat-header"><span class="stat-name"><i class="ph ph-circle-fill" style="color: var(--color-olx); font-size: 8px;"></i> OLX</span><span class="stat-val">R$ 65.000</span></div>
                <div class="progress-track"><div class="progress-fill" style="width: 45%; background: var(--color-olx);"></div></div>
            </div>
            <div class="stat-row">
                <div class="stat-header"><span class="stat-name"><i class="ph ph-circle-fill" style="color: var(--color-fb); font-size: 8px;"></i> Facebook</span><span class="stat-val">R$ 42.000</span></div>
                <div class="progress-track"><div class="progress-fill" style="width: 30%; background: var(--color-fb);"></div></div>
            </div>
            <div class="stat-row">
                <div class="stat-header"><span class="stat-name"><i class="ph ph-circle-fill" style="color: var(--color-insta); font-size: 8px;"></i> Instagram</span><span class="stat-val">R$ 28.500</span></div>
                <div class="progress-track"><div class="progress-fill" style="width: 20%; background: var(--color-insta);"></div></div>
            </div>
        </div>

        <div class="section-header">
            <h3>Extrato Recente</h3>
            <a href="#" class="link-action">Ver tudo</a>
        </div>
        <div class="transaction-list">
            <div class="trans-item">
                <div class="trans-icon"><i class="ph ph-car"></i></div>
                <div class="trans-details"><div class="trans-title">Fiat Toro Volcano</div><div class="trans-date">Hoje, 10:42</div></div>
                <div class="trans-amount"><span class="amount-val">+ R$ 110k</span><span class="platform-badge-mini">OLX</span></div>
            </div>
            <div class="trans-item">
                <div class="trans-icon"><i class="ph ph-device-mobile"></i></div>
                <div class="trans-details"><div class="trans-title">iPhone 14 Pro</div><div class="trans-date">Ontem, 16:20</div></div>
                <div class="trans-amount"><span class="amount-val">+ R$ 5.200</span><span class="platform-badge-mini">Insta</span></div>
            </div>
            <div class="trans-item">
                <div class="trans-icon"><i class="ph ph-house"></i></div>
                <div class="trans-details"><div class="trans-title">Aluguel Apto 202</div><div class="trans-date">12/02/2026</div></div>
                <div class="trans-amount"><span class="amount-val">+ R$ 2.800</span><span class="platform-badge-mini">Zap</span></div>
            </div>
        </div>

        <div class="spacer-bottom"></div>
    </main>

    <div id="modal-new-ad" class="modal-overlay hidden">
        <div class="modal-content bottom-sheet">
            <div class="modal-header">
                <h2 data-i18n="modal_new_title">Criar Anúncio</h2>
                <button class="btn-icon" onclick="toggleModal('modal-new-ad')"><i class="ph ph-x"></i></button>
            </div>
            <div class="modal-body">
                <p class="helper-text" style="margin-bottom: 20px;" data-i18n="modal_new_sub">Selecione a categoria do produto:</p>
                <div class="new-ad-grid">
                   <div class="new-ad-item" onclick="selectCategory('veiculos')"><div class="icon-box style-car"><i class="ph ph-car-profile"></i></div><span class="new-ad-label">Veículos</span></div>
                   <div class="new-ad-item" onclick="selectCategory('imoveis')"><div class="icon-box style-house"><i class="ph ph-house-line"></i></div><span class="new-ad-label">Imóveis</span></div>
                   <div class="new-ad-item" onclick="selectCategory('eletronicos')"><div class="icon-box style-device"><i class="ph ph-device-mobile-camera"></i></div><span class="new-ad-label">Eletrônicos</span></div>
                   <div class="new-ad-item" onclick="selectCategory('agro')"><div class="icon-box style-agro"><i class="ph ph-plant"></i></div><span class="new-ad-label">Agro</span></div>
                   <div class="new-ad-item" onclick="selectCategory('servicos')"><div class="icon-box style-service"><i class="ph ph-wrench"></i></div><span class="new-ad-label">Serviços</span></div>
                   <div class="new-ad-item" onclick="alert('Importar CSV')"><div class="icon-box style-import"><i class="ph ph-download-simple"></i></div><span class="new-ad-label">Importar</span></div>
                </div>
            </div>
        </div>
    </div>

    <div id="bottom-nav-container"></div>

    <script src="assets/js/config.js"></script> 
    <script src="assets/js/theme.js"></script>
    <script src="assets/js/mock_db.js"></script>
    <script src="assets/js/functions.js"></script>

    <script>
        // Renderiza nav sem destaque (sub-pagina)
        renderBottomNav('');

        function filterPeriod(el, period) {
            document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
            el.classList.add('active');
            
            const valEl = document.querySelector('.balance-value');
            if(period === '7d') valEl.textContent = "R$ 32.400,00";
            if(period === '15d') valEl.textContent = "R$ 68.100,00";
            if(period === '30d') valEl.textContent = "R$ 148.500,00";
            if(period === 'total') valEl.textContent = "R$ 840.250,00";
        }
    </script>
</body>
</html>
